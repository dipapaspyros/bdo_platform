{% extends "base.html" %}
{% load static %}
{% load leaflet_tags %}
{% block css %}

    <style>
        @media screen and (min-width: 768px){.modal:before {display: inline-block;vertical-align: middle;content: " ";height: 100%;}}
        .modal-backdrop {z-index:-1;}
        #service_result_container{ position: relative; min-height: 500px; width: 100%; /*background-color: white; display: none;*/}
        .loadingDiv, .loadingFrame{position:absolute;z-index:999;display:none;right:0;left:0;bottom:0;top:0;background:#fff;text-align:center;border:thin dashed;}
        .viz_container{position: relative; height: 400px; width: 100%; margin: 1% 0;}
        #service_result_container iframe{border: none; box-shadow: 0 0 3px 0px #a28e8eb0;}
        th{text-align: center; font-weight: 600 !important;}
        #service_result_container .nav>li {display: inline-block !important;width: 300px !important; float: none !important;}
    </style>
{% endblock %}

{% block content %}

    <div id="service_result_container" class="text-center">
        <div class="loadingDiv">
            <img src="http://assets.motherjones.com/interactives/projects/features/koch-network/shell19/img/loading.gif"/>
        </div>

        <table class="table table-full-width">
            <thead>
                <tr>
                    <th>Maximum Height</th><th>Average Height</th><th>Standard Deviation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ result.max_height }}</td><td>{{ result.av_height }}</td><td>{{ result.stand_dev_height }}</td>
                </tr>
            </tbody>
        </table>

        <table class="table table-full-width">
            <thead>
                <tr>
                    <th>Maximum Period</th><th>Average Period</th><th>Standard Deviation</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ result.max_period }}</td><td>{{ result.av_period }}</td><td>{{ result.stand_dev_period }}</td>
                </tr>
            </tbody>
        </table>

        <div class="panel-group row">
            <div class="panel panel-default col-sm-3">
                <div class="panel-heading">Maximum Power</div>
                <div class="panel-body">{{ result.max_power }}</div>
            </div>
            <div class="panel panel-default col-sm-3">
                <div class="panel-heading">Minimum Power</div>
                <div class="panel-body">{{ result.min_power }}</div>
            </div>
            <div class="panel panel-default col-sm-3">
                <div class="panel-heading">Average Power</div>
                <div class="panel-body">{{ result.av_power }}</div>
            </div>
            <div class="panel panel-default col-sm-3">
                <div class="panel-heading">Energy</div>
                <div class="panel-body">{{ result.energy }}</div>
            </div>
        </div>

        <ul class="nav nav-pills">
          <li class="active"><a data-toggle="pill" href="#viz1">Wave significant height Line Chart</a></li>
          <li><a data-toggle="pill" href="#viz2">Power Line Chart</a></li>
          <li><a data-toggle="pill" href="#viz3">Power Histogram</a></li>
        </ul>

        <div class="tab-content">
            <div class="viz_container row tab-pane fade in active"  id="viz1">
                <div class="loadingFrame">
                    <img src="{% static 'img/loading_gif.gif' %}"/>
                </div>
                <iframe src="/visualizations/get_line_chart_am/?y_var[]=i0_sea_surface_wave_significant_height&x_var=i0_time&query=1101"
                        style="width: 100%; height: 100%; background-color: white;">
                </iframe>
            </div>

            <div class="viz_container row tab-pane fade" id="viz2">
                <div class="loadingFrame">
                    <img src="{% static 'img/loading_gif.gif' %}"/>
                </div>
                <iframe src="/visualizations/get_line_chart_am/?y_var[]=avg(power)&x_var=time&df=power_df&notebook_id={{ new_notebook_id }}"
                        style="width: 100%; height: 100%; background-color: white;">
                </iframe>
            </div>

            <div class="viz_container row tab-pane fade" id="viz3">
                <div class="loadingFrame">
                    <img src="{% static 'img/loading_gif.gif' %}"/>
                </div>
                <iframe src="/visualizations/get_histogram_chart_am/?bins=5&x_var=avg(power)&df=power_df&notebook_id={{ new_notebook_id }}"
                        style="width: 100%; height: 100%; background-color: white;">
                </iframe>
            </div>

        </div>

    </div>

{% endblock %}

{% block  js %}

{% endblock %}